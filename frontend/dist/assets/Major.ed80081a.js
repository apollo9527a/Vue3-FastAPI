import{u as q}from"./vuex.b3663e39.js";import{B}from"./BaseTable.72163d05.js";import{m as _}from"./major.73a67e6e.js";import{d as z}from"./department.838e7cde.js";import{b as N}from"./byIdGetName.f3220ff3.js";import{_ as T}from"./index.f7cf4d0f.js";import{r as p,B as U,o as C,e as E,b as M,z as k,J as u,C as g,K as j,L as n,u as e,T as o,R as L,S as $,D as G,a3 as P,U as R}from"./@vue.d04bd165.js";import"./vue-router.ce07e720.js";import"./Pagination.3bc4fbd5.js";import"./@element-plus.a79a71de.js";import"./element-plus.59a6f374.js";import"./@vueuse.23e01a3f.js";import"./lodash.5c7b62b5.js";import"./dayjs.a4bdb7c5.js";import"./@popperjs.7a88ba6a.js";import"./@ctrl.2e36ce53.js";import"./async-validator.5d25c98b.js";import"./memoize-one.4ee5c96d.js";import"./normalize-wheel-es.9a219a59.js";import"./http.b52ceb59.js";import"./request.441f8969.js";import"./axios.82d3905a.js";import"./echarts.ebd507a1.js";import"./tslib.34a40861.js";import"./zrender.7fbaf631.js";const A={setup(F){const h=p({iconName:"cascades",pageName:"\u4E13\u4E1A",pageNameEn:"major"}),r=p({majorData:[],deptData:[],pageTotal:0,isDisabled:!1,isShowSearched:!1}),f=p({id:"",currentPage:1,pageSize:10}),s=p({id:"",name:"",assistant:"",phone:"",department_id:""}),D=p({id:[{required:"true",trigger:"change",message:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u7F16\u53F7"},{pattern:/^10/,message:"\u4E13\u4E1A\u7F16\u53F7\u8981\u4EE510\u5F00\u5934"},{min:6,max:6,message:"\u4E13\u4E1A\u7F16\u53F7\u7684\u957F\u5EA6\u5E94\u4E3A6"},{pattern:/^10[0-9]{4}$/,message:"\u4E13\u4E1A\u7F16\u53F7\u5FC5\u987B\u4E3A\u6B63\u6574\u6570)"},{validator:w}],name:[{required:"true",message:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u540D\u79F0",trigger:["change","blur"]}],assistant:[{required:"true",message:"\u8BF7\u8F93\u5165\u8F85\u5BFC\u5458\u59D3\u540D",trigger:["change","blur"]}],phone:[{pattern:/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7",trigger:["change","blur"]}],department_id:[{required:"true",message:"\u8BF7\u9009\u62E9\u9662\u7CFB",trigger:["change"]}]}),c=q();async function b(d=1){let a={pageIndex:d,pageSize:f.pageSize};const{data:l}=await _.read_datas(a);if(r.majorData=l.dataList,r.pageTotal=l.count,c.state.departmentData==""){const{data:i}=await z.department_relation();r.deptData=i,c.commit("handleData",["department",i])}else r.deptData=c.state.departmentData}U(()=>{console.log("major\u521B\u5EFA\u4E86\uFF01")}),C(()=>{console.log("major\u9500\u6BC1\u4E86\uFF01")}),E(()=>{console.log("major\u7F13\u5B58\u7EC4\u4EF6\u6FC0\u6D3B\uFF01")}),M(()=>{console.log("major\u7F13\u5B58\u7EC4\u4EF6\u5931\u6D3B\uFF01")}),k(()=>{b()});function w(d,a,l){r.isDisabled?l():r.majorData.map(i=>i.id).indexOf(a)!=-1?l(new Error("\u4E13\u4E1A\u7F16\u53F7\u5DF2\u7ECF\u5B58\u5728")):l()}function v(d){r.isDisabled=d}function V(d){r.isShowSearched=d}function x(d){console.log("\u4E0B\u62C9\u6846\u7684\u503C\u4E3A--",d)}return(d,a)=>{const l=u("el-table-column"),i=u("el-input"),m=u("el-form-item"),S=u("el-option"),y=u("el-select");return g(),j(B,{page:e(h),query:e(f),data:e(r).majorData,"page-total":e(r).pageTotal,"form-data":e(s),"form-rules":e(D),"get-data":b,apis:e(_),onEmitIsDisabled:v,onEmitIsShowSearched:V},{filter:n(()=>[]),tableColumn:n(()=>[o(l,{prop:"id",label:"\u4E13\u4E1A\u7F16\u53F7",width:"140",align:"center",sortable:!e(r).isShowSearched,"sort-orders":["ascending","descending"]},null,8,["sortable"]),o(l,{prop:"name",label:"\u4E13\u4E1A\u540D\u5B57",width:"220",align:"center"}),o(l,{prop:"assistant",label:"\u8F85\u5BFC\u5458\u59D3\u540D",width:"140",align:"center"}),o(l,{prop:"phone",label:"\u8F85\u5BFC\u5458\u624B\u673A\u53F7",width:"180",align:"center"}),o(l,{prop:"department_id",label:"\u9662\u7CFB\u540D\u5B57","min-width":"220",align:"center"},{default:n(t=>[L($(e(N)(t.row.department_id,e(r).deptData)),1)]),_:1})]),showDialog:n(()=>[o(m,{label:"\u4E13\u4E1A\u7F16\u53F7",prop:"id"},{default:n(()=>[o(i,{modelValue:e(s).id,"onUpdate:modelValue":a[0]||(a[0]=t=>e(s).id=t),placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7",maxlength:"6","show-word-limit":"",disabled:e(r).isDisabled},null,8,["modelValue","disabled"])]),_:1}),o(m,{label:"\u4E13\u4E1A\u540D\u5B57",prop:"name"},{default:n(()=>[o(i,{modelValue:e(s).name,"onUpdate:modelValue":a[1]||(a[1]=t=>e(s).name=t),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57",maxlength:"20","show-word-limit":""},null,8,["modelValue"])]),_:1}),o(m,{label:"\u8F85\u5BFC\u5458\u59D3\u540D",prop:"assistant"},{default:n(()=>[o(i,{modelValue:e(s).assistant,"onUpdate:modelValue":a[2]||(a[2]=t=>e(s).assistant=t),placeholder:"\u8BF7\u8F93\u5165\u8F85\u5BFC\u5458\u59D3\u540D",maxlength:"10","show-word-limit":""},null,8,["modelValue"])]),_:1}),o(m,{label:"\u8F85\u5BFC\u5458\u624B\u673A\u53F7",prop:"phone"},{default:n(()=>[o(i,{modelValue:e(s).phone,"onUpdate:modelValue":a[3]||(a[3]=t=>e(s).phone=t),type:"tel",placeholder:"\u8BF7\u8F93\u5165\u8F85\u5BFC\u5458\u624B\u673A\u53F7",maxlength:"11"},null,8,["modelValue"])]),_:1}),o(m,{label:"\u9662\u7CFB\u540D\u5B57",prop:"department_id"},{default:n(()=>[o(y,{modelValue:e(s).department_id,"onUpdate:modelValue":a[4]||(a[4]=t=>e(s).department_id=t),placeholder:"\u8BF7\u9009\u62E9\u9662\u7CFB",onChange:a[5]||(a[5]=t=>x(e(s).department_id))},{default:n(()=>[(g(!0),G(R,null,P(e(r).deptData,(t,I)=>(g(),j(S,{key:I,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["page","query","data","page-total","form-data","form-rules","apis"])}}};var be=T(A,[["__scopeId","data-v-342b6aa5"]]);export{be as default};
