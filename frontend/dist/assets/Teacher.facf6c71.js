import{u as I,B as L,v as V,b as M}from"./handleArray.c31bd690.js";import{_ as O,r as T,l as N}from"./index.42360b27.js";import{d as z,g,h as P,r as p,o as b,c as v,w as l,k as u,l as e,z as B,t as E,i as $,C as G,F as R}from"./vendor.fe2efcfb.js";const j=z({setup(H){const h=I(),f=g({icon:"cascades",zhName:"\u6559\u5E08\u8868",enName:"teacher"}),o=g({teacherData:[],deptData:[],pageTotal:0,isDisabled:!1,isShowSearched:!1,addOrUpdate:!1}),F=g({id:"",currentPage:1,pageSize:10}),D={man:{tag:"success",name:"\u7537"},woman:{tag:"danger",name:"\u5973"}},w={Bachelor:{tag:"",name:"\u5B66\u58EB"},Master:{tag:"success",name:"\u7855\u58EB"},Doctor:{tag:"warning",name:"\u535A\u58EB"}},y={Assistant:{tag:"",name:"\u52A9\u6559"},Lecturer:{tag:"success",name:"\u8BB2\u5E08"},Associate:{tag:"warning",name:"\u526F\u6559\u6388"},Professor:{tag:"danger",name:"\u6559\u6388"}},r=g({id:"",name:"",sex:"man",birthday:"",password:"123456",education:"Bachelor",title:"Assistant",department_id:""}),x=g({id:[{required:"true",trigger:"change",message:"\u8BF7\u8F93\u5165\u804C\u5DE5\u53F7"},{pattern:/^[1-9]/,message:"\u804C\u5DE5\u53F7\u4E0D\u80FD\u4EE50\u5F00\u5934"},{min:6,max:6,message:"\u804C\u5DE5\u53F7\u7684\u957F\u5EA6\u5E94\u4E3A6"},{pattern:/^[1-9][0-9]{5}$/,message:"\u804C\u5DE5\u53F7\u5FC5\u987B\u662F\u6B63\u6574\u6570"},{validator:(n,t,d)=>{let i=V(h.teacherData,"id");!o.isDisabled&&i.indexOf(t)!=-1?d(new Error("\u9662\u7CFB\u7F16\u53F7\u5DF2\u7ECF\u5B58\u5728")):d()}}],name:[{required:"true",message:"\u8BF7\u8F93\u5165\u6559\u5E08\u540D\u79F0(\u6700\u5927\u957F\u5EA6\u4E3A10)",trigger:["change","blur"]},{validator:(n,t,d)=>{let i=V(h.teacherData,"name");!o.isDisabled&&i.indexOf(t)!=-1?d(new Error("\u9662\u7CFB\u540D\u5B57\u5DF2\u7ECF\u5B58\u5728")):d()}}],sex:[{required:"true",message:"\u8BF7\u8F93\u5165\u6559\u5E08\u6027\u522B",trigger:"change"}],birthday:[{required:"true",message:"\u8BF7\u9009\u62E9\u751F\u65E5",trigger:"change"}],password:[{message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",trigger:"change"}],education:[{required:"true",message:"\u8BF7\u9009\u62E9\u6559\u5E08\u5B66\u5386",trigger:"change"}],title:[{required:"true",message:"\u8BF7\u9009\u62E9\u6559\u5E08\u804C\u79F0",trigger:"change"}],department_id:[{required:"true",message:"\u8BF7\u9009\u62E9\u9662\u7CFB",trigger:"change"}]}),C=async(n=F.currentPage)=>{let t={path:f.enName,pageIndex:n,pageSize:F.pageSize};const{data:d}=await T(t);o.teacherData=d.dataList,o.pageTotal=d.count;const{data:i}=await N("department");o.deptData=i};P(()=>C());const S=n=>o.isDisabled=n,A=n=>o.isShowSearched=n,k=n=>o.addOrUpdate=n,U=n=>{};return(n,t)=>{const d=p("el-table-column"),i=p("el-tag"),_=p("el-input"),m=p("el-form-item"),s=p("el-option"),c=p("el-select"),q=p("el-date-picker");return b(),v(L,{page:u(f),query:u(F),data:u(o).teacherData,"page-total":u(o).pageTotal,"form-data":u(r),"form-rules":u(x),"get-data":C,onEmitIsDisabled:S,onEmitIsShowSearched:A,onEmitAddOrUpdate:k},{filter:l(()=>[]),tableColumn:l(()=>[e(d,{prop:"id",label:"\u804C\u5DE5\u53F7",width:"120",align:"center",sortable:!u(o).isShowSearched,"sort-orders":["ascending","descending"]},null,8,["sortable"]),e(d,{prop:"name",label:"\u6559\u5E08\u540D\u5B57",width:"120",align:"center"}),e(d,{prop:"sex",label:"\u6559\u5E08\u6027\u522B",width:"100",align:"center"},{default:l(a=>[e(i,{type:D[a.row.sex].tag},{default:l(()=>[B(E(D[a.row.sex].name),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"birthday",label:"\u6559\u5E08\u751F\u65E5",width:"140",align:"center",sortable:!u(o).isShowSearched,"sort-orders":["ascending","descending"]},null,8,["sortable"]),e(d,{prop:"education",label:"\u6559\u5E08\u5B66\u5386",width:"100",align:"center"},{default:l(a=>[e(i,{type:w[a.row.education].tag},{default:l(()=>[B(E(w[a.row.education].name),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"title",label:"\u6559\u5E08\u804C\u79F0",width:"120",align:"center"},{default:l(a=>[e(i,{type:y[a.row.title].tag},{default:l(()=>[B(E(y[a.row.title].name),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"department_id",label:"\u9662\u7CFB\u540D\u5B57",width:"180",align:"center"},{default:l(a=>[B(E(u(M)(a.row.department_id,u(o).deptData)),1)]),_:1})]),showDialog:l(()=>[e(m,{label:"\u804C\u5DE5\u53F7",prop:"id"},{default:l(()=>[e(_,{modelValue:u(r).id,"onUpdate:modelValue":t[0]||(t[0]=a=>u(r).id=a),placeholder:"\u8BF7\u8F93\u5165\u804C\u5DE5\u53F7",maxlength:"6","show-word-limit":"",disabled:u(o).isDisabled},null,8,["modelValue","disabled"])]),_:1}),e(m,{label:"\u6559\u5E08\u540D\u5B57",prop:"name"},{default:l(()=>[e(_,{modelValue:u(r).name,"onUpdate:modelValue":t[1]||(t[1]=a=>u(r).name=a),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57",maxlength:"10","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(m,{label:"\u6559\u5E08\u6027\u522B",prop:"sex"},{default:l(()=>[e(c,{modelValue:u(r).sex,"onUpdate:modelValue":t[2]||(t[2]=a=>u(r).sex=a),placeholder:"\u8BF7\u9009\u62E9\u6027\u522B"},{default:l(()=>[e(s,{key:"1",label:"\u7537",value:"man"}),e(s,{key:"2",label:"\u5973",value:"woman"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"\u6559\u5E08\u751F\u65E5",prop:"birthday"},{default:l(()=>[e(q,{type:"date",placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F",modelValue:u(r).birthday,"onUpdate:modelValue":t[3]||(t[3]=a=>u(r).birthday=a),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(m,{label:"\u6559\u5E08\u5BC6\u7801",prop:"password"},{default:l(()=>[e(_,{modelValue:u(r).password,"onUpdate:modelValue":t[4]||(t[4]=a=>u(r).password=a),placeholder:u(o).addOrUpdate==!0?"\u9ED8\u8BA4\u5BC6\u7801\u4E3A123456":"\u8BBE\u7F6E\u65B0\u5BC6\u7801",maxlength:"20","show-password":""},null,8,["modelValue","placeholder"])]),_:1}),e(m,{label:"\u6559\u5E08\u5B66\u5386",prop:"education"},{default:l(()=>[e(c,{modelValue:u(r).education,"onUpdate:modelValue":t[5]||(t[5]=a=>u(r).education=a),placeholder:"\u8BF7\u9009\u62E9\u5B66\u5386"},{default:l(()=>[e(s,{key:"1",label:"\u5B66\u58EB",value:"Bachelor"}),e(s,{key:"2",label:"\u7855\u58EB",value:"Master"}),e(s,{key:"3",label:"\u535A\u58EB",value:"Doctor"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"\u6559\u5E08\u804C\u79F0",prop:"title"},{default:l(()=>[e(c,{modelValue:u(r).title,"onUpdate:modelValue":t[6]||(t[6]=a=>u(r).title=a),placeholder:"\u8BF7\u9009\u62E9\u804C\u79F0"},{default:l(()=>[e(s,{key:"1",label:"\u52A9\u6559",value:"Assistant"}),e(s,{key:"2",label:"\u8BB2\u5E08",value:"Lecturer"}),e(s,{key:"3",label:"\u526F\u6559\u6388",value:"Associate"}),e(s,{key:"4",label:"\u6559\u6388",value:"Professor"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"\u9662\u7CFB\u540D\u5B57",prop:"department_id"},{default:l(()=>[e(c,{modelValue:u(r).department_id,"onUpdate:modelValue":t[7]||(t[7]=a=>u(r).department_id=a),placeholder:"\u8BF7\u9009\u62E9\u9662\u7CFB",onChange:t[8]||(t[8]=a=>U(u(r).department_id))},{default:l(()=>[(b(!0),$(R,null,G(u(o).deptData,(a,Y)=>(b(),v(s,{key:Y,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["page","query","data","page-total","form-data","form-rules"])}}});var W=O(j,[["__scopeId","data-v-2f8fab82"]]);export{W as default};
