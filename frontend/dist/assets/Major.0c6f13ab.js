import{u as S,B as v,v as D,b as x}from"./handleArray.c31bd690.js";import{_ as y,r as j,l as q}from"./index.42360b27.js";import{d as I,g as m,h as N,r as p,o as g,c as E,w as s,k as e,l as t,z,t as L,i as T,C as U,F as k}from"./vendor.fe2efcfb.js";const M=I({setup($){const c=S(),_=m({icon:"cascades",zhName:"\u4E13\u4E1A\u8868",enName:"major"}),o=m({majorData:[],deptData:[],pageTotal:0,isDisabled:!1,isShowSearched:!1}),F=m({id:"",currentPage:1,pageSize:10}),r=m({id:"",name:"",assistant:"",phone:"",department_id:""}),h=m({id:[{required:"true",trigger:"change",message:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u7F16\u53F7"},{pattern:/^10/,message:"\u4E13\u4E1A\u7F16\u53F7\u8981\u4EE510\u5F00\u5934"},{min:6,max:6,message:"\u4E13\u4E1A\u7F16\u53F7\u7684\u957F\u5EA6\u5E94\u4E3A6"},{pattern:/^10[0-9]{4}$/,message:"\u4E13\u4E1A\u7F16\u53F7\u5FC5\u987B\u4E3A\u6B63\u6574\u6570)"},{validator:(d,a,l)=>{let n=D(c.majorData,"id");!o.isDisabled&&n.indexOf(a)!=-1?l(new Error("\u4E13\u4E1A\u7F16\u53F7\u5DF2\u7ECF\u5B58\u5728")):l()}}],name:[{required:"true",message:"\u8BF7\u8F93\u5165\u4E13\u4E1A\u540D\u79F0",trigger:["change","blur"]},{validator:(d,a,l)=>{let n=D(c.majorData,"name");!o.isDisabled&&n.indexOf(a)!=-1?l(new Error("\u4E13\u4E1A\u540D\u5B57\u5DF2\u7ECF\u5B58\u5728")):l()}}],assistant:[{required:"true",message:"\u8BF7\u8F93\u5165\u8F85\u5BFC\u5458\u59D3\u540D",trigger:["change","blur"]}],phone:[{pattern:/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7",trigger:["change","blur"]}],department_id:[{required:"true",message:"\u8BF7\u9009\u62E9\u9662\u7CFB",trigger:["change"]}]}),B=async(d=F.currentPage)=>{let a={path:_.enName,pageIndex:d,pageSize:F.pageSize};const{data:l}=await j(a);o.majorData=l.dataList,o.pageTotal=l.count;const{data:n}=await q("department");o.deptData=n};N(()=>B());const b=d=>o.isDisabled=d,f=d=>o.isShowSearched=d,w=d=>{};return(d,a)=>{const l=p("el-table-column"),n=p("el-input"),i=p("el-form-item"),C=p("el-option"),A=p("el-select");return g(),E(v,{page:e(_),query:e(F),data:e(o).majorData,"page-total":e(o).pageTotal,"form-data":e(r),"form-rules":e(h),"get-data":B,onEmitIsDisabled:b,onEmitIsShowSearched:f},{filter:s(()=>[]),tableColumn:s(()=>[t(l,{prop:"id",label:"\u4E13\u4E1A\u7F16\u53F7",width:"120",align:"center",sortable:!e(o).isShowSearched,"sort-orders":["ascending","descending"]},null,8,["sortable"]),t(l,{prop:"name",label:"\u4E13\u4E1A\u540D\u5B57",width:"200",align:"center"}),t(l,{prop:"assistant",label:"\u8F85\u5BFC\u5458\u59D3\u540D",width:"120",align:"center"}),t(l,{prop:"phone",label:"\u8F85\u5BFC\u5458\u624B\u673A\u53F7",width:"180",align:"center"}),t(l,{prop:"department_id",label:"\u9662\u7CFB\u540D\u5B57",width:"200",align:"center"},{default:s(u=>[z(L(e(x)(u.row.department_id,e(o).deptData)),1)]),_:1})]),showDialog:s(()=>[t(i,{label:"\u4E13\u4E1A\u7F16\u53F7",prop:"id"},{default:s(()=>[t(n,{modelValue:e(r).id,"onUpdate:modelValue":a[0]||(a[0]=u=>e(r).id=u),placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7",maxlength:"6","show-word-limit":"",disabled:e(o).isDisabled},null,8,["modelValue","disabled"])]),_:1}),t(i,{label:"\u4E13\u4E1A\u540D\u5B57",prop:"name"},{default:s(()=>[t(n,{modelValue:e(r).name,"onUpdate:modelValue":a[1]||(a[1]=u=>e(r).name=u),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57",maxlength:"20","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(i,{label:"\u8F85\u5BFC\u5458\u59D3\u540D",prop:"assistant"},{default:s(()=>[t(n,{modelValue:e(r).assistant,"onUpdate:modelValue":a[2]||(a[2]=u=>e(r).assistant=u),placeholder:"\u8BF7\u8F93\u5165\u8F85\u5BFC\u5458\u59D3\u540D",maxlength:"10","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(i,{label:"\u8F85\u5BFC\u5458\u624B\u673A\u53F7",prop:"phone"},{default:s(()=>[t(n,{modelValue:e(r).phone,"onUpdate:modelValue":a[3]||(a[3]=u=>e(r).phone=u),type:"tel",placeholder:"\u8BF7\u8F93\u5165\u8F85\u5BFC\u5458\u624B\u673A\u53F7",maxlength:"11"},null,8,["modelValue"])]),_:1}),t(i,{label:"\u9662\u7CFB\u540D\u5B57",prop:"department_id"},{default:s(()=>[t(A,{modelValue:e(r).department_id,"onUpdate:modelValue":a[4]||(a[4]=u=>e(r).department_id=u),placeholder:"\u8BF7\u9009\u62E9\u9662\u7CFB",onChange:a[5]||(a[5]=u=>w(e(r).department_id))},{default:s(()=>[(g(!0),T(k,null,U(e(o).deptData,(u,V)=>(g(),E(C,{key:V,label:u.name,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["page","query","data","page-total","form-data","form-rules"])}}});var R=y(M,[["__scopeId","data-v-37d489bd"]]);export{R as default};
